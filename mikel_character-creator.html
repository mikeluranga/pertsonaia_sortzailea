<!DOCTYPE html>
<html lang="eu">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pertsonaia Sortzailea</title>
<link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700;900&family=Crimson+Text:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
<style>
  :root {
    --gold: #c9a84c;
    --gold-light: #e8cc7a;
    --gold-dark: #8a6520;
    --parchment: #f5e6c8;
    --parchment-dark: #e8d5a3;
    --ink: #1a0e05;
    --ink-mid: #3d2610;
    --blood: #8b1a1a;
    --shadow: rgba(0,0,0,0.6);
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    background-color: #0d0a06;
    background-image:
      radial-gradient(ellipse at 20% 20%, #1a0e05 0%, transparent 60%),
      radial-gradient(ellipse at 80% 80%, #0d0500 0%, transparent 60%),
      url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='4' height='4'%3E%3Crect width='4' height='4' fill='%230d0a06'/%3E%3Crect width='1' height='1' fill='%23181208' opacity='0.5'/%3E%3C/svg%3E");
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: flex-start;
    padding: 40px 20px;
    font-family: 'Crimson Text', Georgia, serif;
    color: var(--ink);
  }

  .sheet {
    background: var(--parchment);
    background-image:
      url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3CfeColorMatrix type='saturate' values='0'/%3E%3C/filter%3E%3Crect width='200' height='200' filter='url(%23n)' opacity='0.07'/%3E%3C/svg%3E"),
      linear-gradient(135deg, #fdf3d8 0%, #eddcaa 50%, #f5e6c8 100%);
    max-width: 780px;
    width: 100%;
    border-radius: 4px;
    box-shadow:
      0 0 0 2px var(--gold-dark),
      0 0 0 6px var(--gold),
      0 0 0 8px var(--gold-dark),
      0 20px 60px rgba(0,0,0,0.8),
      inset 0 0 80px rgba(0,0,0,0.05);
    padding: 50px 60px;
    position: relative;
    animation: unfurl 0.6s ease-out;
  }

  @keyframes unfurl {
    from { opacity: 0; transform: translateY(-20px) scale(0.98); }
    to   { opacity: 1; transform: translateY(0) scale(1); }
  }

  .sheet::before, .sheet::after {
    content: '';
    position: absolute;
    top: 14px; bottom: 14px; left: 14px; right: 14px;
    border: 1px solid var(--gold-dark);
    pointer-events: none;
    border-radius: 2px;
  }
  .sheet::after {
    top: 18px; bottom: 18px; left: 18px; right: 18px;
    border-color: var(--gold);
    opacity: 0.4;
  }

  /* Corner ornaments */
  .corner { position: absolute; width: 40px; height: 40px; }
  .corner svg { width: 100%; height: 100%; }
  .tl { top: 8px; left: 8px; }
  .tr { top: 8px; right: 8px; transform: scaleX(-1); }
  .bl { bottom: 8px; left: 8px; transform: scaleY(-1); }
  .br { bottom: 8px; right: 8px; transform: scale(-1); }

  h1 {
    font-family: 'Cinzel Decorative', serif;
    font-size: 2rem;
    text-align: center;
    color: var(--ink-mid);
    letter-spacing: 2px;
    margin-bottom: 6px;
    text-shadow: 1px 1px 0 var(--gold-light);
  }

  .subtitle {
    text-align: center;
    font-style: italic;
    color: var(--gold-dark);
    font-size: 1.1rem;
    margin-bottom: 30px;
  }

  .divider {
    display: flex;
    align-items: center;
    gap: 12px;
    margin: 24px 0;
  }
  .divider-line {
    flex: 1;
    height: 1px;
    background: linear-gradient(to right, transparent, var(--gold-dark), transparent);
  }
  .divider-gem {
    width: 10px; height: 10px;
    background: var(--gold);
    transform: rotate(45deg);
    box-shadow: 0 0 6px var(--gold);
  }

  .roll-btn {
    display: block;
    margin: 0 auto 30px;
    background: linear-gradient(135deg, var(--gold-dark), var(--gold), var(--gold-dark));
    color: var(--ink);
    border: 2px solid var(--gold-dark);
    font-family: 'Cinzel Decorative', serif;
    font-size: 0.9rem;
    letter-spacing: 1px;
    padding: 12px 30px;
    cursor: pointer;
    border-radius: 2px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,255,255,0.3);
    transition: all 0.2s;
    position: relative;
    overflow: hidden;
  }
  .roll-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0,0,0,0.5), inset 0 1px 0 rgba(255,255,255,0.3);
    background: linear-gradient(135deg, var(--gold), var(--gold-light), var(--gold));
  }
  .roll-btn:active { transform: translateY(0); }

  h2 {
    font-family: 'Cinzel Decorative', serif;
    font-size: 1.1rem;
    color: var(--ink-mid);
    text-align: center;
    letter-spacing: 1px;
    margin-bottom: 20px;
  }

  .attributes-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 14px;
    margin-bottom: 10px;
  }

  .attr-card {
    background: linear-gradient(135deg, rgba(255,255,255,0.5), rgba(200,160,80,0.1));
    border: 1px solid var(--gold);
    border-radius: 3px;
    padding: 12px 10px;
    text-align: center;
    position: relative;
    box-shadow: inset 0 0 20px rgba(200,160,80,0.1), 0 2px 4px rgba(0,0,0,0.15);
    transition: box-shadow 0.2s;
  }
  .attr-card:hover {
    box-shadow: inset 0 0 20px rgba(200,160,80,0.2), 0 4px 8px rgba(0,0,0,0.2);
  }
  .attr-name {
    font-family: 'Cinzel Decorative', serif;
    font-size: 0.65rem;
    letter-spacing: 1px;
    color: var(--gold-dark);
    margin-bottom: 6px;
  }
  .attr-value {
    font-family: 'Cinzel Decorative', serif;
    font-size: 2rem;
    font-weight: 900;
    color: var(--ink-mid);
    line-height: 1;
  }
  .attr-mod {
    font-size: 0.9rem;
    color: var(--gold-dark);
    font-style: italic;
    margin-top: 2px;
  }
  .attr-mod.positive { color: #2a5c2a; }
  .attr-mod.negative { color: var(--blood); }

  /* Skills Section */
  .skills-section {
    margin-top: 10px;
  }

  .ep-display {
    text-align: center;
    margin-bottom: 20px;
  }
  .ep-label {
    font-family: 'Cinzel Decorative', serif;
    font-size: 0.8rem;
    color: var(--gold-dark);
    letter-spacing: 2px;
    margin-bottom: 4px;
  }
  .ep-value {
    font-family: 'Cinzel Decorative', serif;
    font-size: 2.5rem;
    color: var(--ink-mid);
    line-height: 1;
  }
  .ep-pips {
    display: flex;
    justify-content: center;
    gap: 6px;
    margin-top: 8px;
  }
  .pip {
    width: 14px; height: 14px;
    border: 1px solid var(--gold-dark);
    transform: rotate(45deg);
    transition: background 0.3s;
  }
  .pip.filled { background: var(--gold); box-shadow: 0 0 4px var(--gold); }

  .skills-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
  }

  .skill-card {
    border: 1px solid var(--gold);
    border-radius: 3px;
    padding: 16px;
    background: linear-gradient(135deg, rgba(255,255,255,0.4), rgba(200,160,80,0.08));
    box-shadow: inset 0 0 20px rgba(200,160,80,0.08);
  }
  .skill-name {
    font-family: 'Cinzel Decorative', serif;
    font-size: 0.75rem;
    color: var(--gold-dark);
    letter-spacing: 1px;
    margin-bottom: 8px;
  }
  .skill-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  .skill-value {
    font-family: 'Cinzel Decorative', serif;
    font-size: 2rem;
    color: var(--ink-mid);
  }
  .skill-btn {
    background: linear-gradient(135deg, var(--gold-dark), var(--gold));
    color: var(--ink);
    border: 1px solid var(--gold-dark);
    font-family: 'Cinzel Decorative', serif;
    font-size: 0.7rem;
    padding: 6px 14px;
    cursor: pointer;
    border-radius: 2px;
    transition: all 0.2s;
    box-shadow: 0 2px 4px rgba(0,0,0,0.3);
  }
  .skill-btn:hover:not(:disabled) {
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.3);
  }
  .skill-btn:disabled {
    opacity: 0.4;
    cursor: not-allowed;
    transform: none;
  }
  .skill-cost {
    font-size: 0.8rem;
    color: var(--gold-dark);
    font-style: italic;
    margin-top: 4px;
  }

  @keyframes rolled {
    0% { transform: scale(1.2); opacity: 0.5; }
    100% { transform: scale(1); opacity: 1; }
  }
  .attr-card.rolled { animation: rolled 0.4s ease-out; }

  @media (max-width: 600px) {
    .sheet { padding: 40px 24px; }
    .attributes-grid { grid-template-columns: repeat(2, 1fr); }
    h1 { font-size: 1.4rem; }
    .skills-grid { grid-template-columns: 1fr; }
  }
</style>
</head>
<body>

<div class="sheet">
  <!-- Corner ornaments -->
  <div class="corner tl">
    <svg viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M2 2 L2 20 Q2 2 20 2 Z" fill="#8a6520" opacity="0.6"/>
      <path d="M2 2 L38 2 L2 38" stroke="#c9a84c" stroke-width="1" fill="none"/>
      <circle cx="2" cy="2" r="3" fill="#c9a84c"/>
      <circle cx="20" cy="2" r="2" fill="#c9a84c" opacity="0.5"/>
      <circle cx="2" cy="20" r="2" fill="#c9a84c" opacity="0.5"/>
    </svg>
  </div>
  <div class="corner tr">
    <svg viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M2 2 L38 2 L2 38" stroke="#c9a84c" stroke-width="1" fill="none"/>
      <circle cx="2" cy="2" r="3" fill="#c9a84c"/>
      <circle cx="20" cy="2" r="2" fill="#c9a84c" opacity="0.5"/>
      <circle cx="2" cy="20" r="2" fill="#c9a84c" opacity="0.5"/>
    </svg>
  </div>
  <div class="corner bl">
    <svg viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M2 2 L38 2 L2 38" stroke="#c9a84c" stroke-width="1" fill="none"/>
      <circle cx="2" cy="2" r="3" fill="#c9a84c"/>
      <circle cx="20" cy="2" r="2" fill="#c9a84c" opacity="0.5"/>
      <circle cx="2" cy="20" r="2" fill="#c9a84c" opacity="0.5"/>
    </svg>
  </div>
  <div class="corner br">
    <svg viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M2 2 L38 2 L2 38" stroke="#c9a84c" stroke-width="1" fill="none"/>
      <circle cx="2" cy="2" r="3" fill="#c9a84c"/>
      <circle cx="20" cy="2" r="2" fill="#c9a84c" opacity="0.5"/>
      <circle cx="2" cy="20" r="2" fill="#c9a84c" opacity="0.5"/>
    </svg>
  </div>

  <h1>Pertsonaia Sortzailea</h1>
  <p class="subtitle">‚Äî Izaera Sorkundearen Liburua ‚Äî</p>

  <button class="roll-btn" onclick="rerollAll()">üé≤ Berriro Sortu Pertsonaia</button>

  <div class="divider"><div class="divider-line"></div><div class="divider-gem"></div><div class="divider-line"></div></div>

  <h2>‚öî Atributuak (3d6) ‚öî</h2>
  <div class="attributes-grid" id="attrGrid"></div>

  <div class="divider"><div class="divider-line"></div><div class="divider-gem"></div><div class="divider-line"></div></div>

  <div class="skills-section">
    <h2>‚öô Gaitasunak ‚öô</h2>
    <div class="ep-display">
      <div class="ep-label">Esperientzia Puntuak</div>
      <div class="ep-value" id="epValue">5</div>
      <div class="ep-pips" id="epPips"></div>
    </div>
    <div class="skills-grid">
      <div class="skill-card">
        <div class="skill-name">‚öî Borroka</div>
        <div class="skill-row">
          <div class="skill-value" id="borrokaVal">0</div>
          <div>
            <button class="skill-btn" id="borrokaBtn" onclick="increaseSkill('borroka')">+1 GAITASUN</button>
            <div class="skill-cost">2 EP behar</div>
          </div>
        </div>
      </div>
      <div class="skill-card">
        <div class="skill-name">üèπ Punteria</div>
        <div class="skill-row">
          <div class="skill-value" id="punteriaVal">0</div>
          <div>
            <button class="skill-btn" id="punteriaBtn" onclick="increaseSkill('punteria')">+1 GAITASUN</button>
            <div class="skill-cost">2 EP behar</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  const ATTR_NAMES = ['IND','SEND','ESK','ATL','ZOR','ERA','BOR','ART','ISI','BIZ','OSA','EZA'];

  const rollDie = (s) => Math.floor(Math.random() * s) + 1;
  const roll3d6 = () => rollDie(6) + rollDie(6) + rollDie(6);
  const calcMod = (v) => Math.floor((v - 10) / 2);

  let state = {
    attributes: {},
    EP: 5,
    borroka: 0,
    punteria: 0
  };

  function generateAttributes() {
    const attrs = {};
    ATTR_NAMES.forEach(k => attrs[k] = roll3d6());
    return attrs;
  }

  function renderAttributes(animate = false) {
    const grid = document.getElementById('attrGrid');
    grid.innerHTML = '';
    ATTR_NAMES.forEach(key => {
      const val = state.attributes[key];
      const mod = calcMod(val);
      const modStr = (mod >= 0 ? '+' : '') + mod;
      const modClass = mod > 0 ? 'positive' : (mod < 0 ? 'negative' : '');
      const card = document.createElement('div');
      card.className = 'attr-card' + (animate ? ' rolled' : '');
      card.innerHTML = `
        <div class="attr-name">${key}</div>
        <div class="attr-value">${val}</div>
        <div class="attr-mod ${modClass}">Mod ${modStr}</div>
      `;
      grid.appendChild(card);
    });
  }

  function renderEP() {
    document.getElementById('epValue').textContent = state.EP;
    const pips = document.getElementById('epPips');
    pips.innerHTML = '';
    for (let i = 0; i < 5; i++) {
      const pip = document.createElement('div');
      pip.className = 'pip' + (i < state.EP ? ' filled' : '');
      pips.appendChild(pip);
    }
  }

  function renderSkills() {
    document.getElementById('borrokaVal').textContent = state.borroka;
    document.getElementById('punteriaVal').textContent = state.punteria;
    document.getElementById('borrokaBtn').disabled = state.EP < 2;
    document.getElementById('punteriaBtn').disabled = state.EP < 2;
  }

  function rerollAll() {
    state.attributes = generateAttributes();
    state.EP = 5;
    state.borroka = 0;
    state.punteria = 0;
    renderAttributes(true);
    renderEP();
    renderSkills();
  }

  function increaseSkill(skill) {
    if (state.EP < 2) return;
    state[skill]++;
    state.EP -= 2;
    renderEP();
    renderSkills();
  }

  // Init
  state.attributes = generateAttributes();
  renderAttributes(false);
  renderEP();
  renderSkills();
</script>
</body>
</html>
